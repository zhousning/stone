.container-fluid
  = form_for [@labour_live, @live_cert ], :builder => WebsiteFormBuilder do |f|
    - if @live_cert.errors.any?
      #error_explanation.alert.alert-danger.alert-dismissible.fade.show
        %button.close{"aria-label" => "Close", "data-dismiss" => "alert", :type => "button"}
          %span{"aria-hidden" => "true"} x 
        %h2= "#{pluralize(@live_cert.errors.count, "error")} prohibited this buyer from being saved:"
        %ul
          - @live_cert.errors.full_messages.each do |msg|
            %li= msg
    .form-row
    
      .col-6
        .form-group.row
          = f.label Setting.live_certs.reg_no, :class => "col-3 text-right col-form-label col-form-label"
          .col-9
            = f.text_field :reg_no, :class => "form-control"
          
      .col-6
        .form-group.row
          = f.label Setting.live_certs.cert_no, :class => "col-3 text-right col-form-label col-form-label"
          .col-9
            = f.text_field :cert_no, :class => "form-control"
          
      .col-6
        .form-group.row
          = f.label Setting.live_certs.start, :class => "col-3 text-right col-form-label col-form-label"
          .col-9
            = f.date_field :start, :class => "form-control"
          
      .col-6
        .form-group.row
          = f.label Setting.live_certs.end, :class => "col-3 text-right col-form-label col-form-label"
          .col-9
            = f.date_field :end, :class => "form-control"
          
      .col-6
        .form-group.row
          = f.label Setting.live_certs.dept, :class => "col-3 text-right col-form-label col-form-label"
          .col-9
            = f.select :dept, options_for_cert_dept, {:include_blank=>false}, {:class=>"form-control"}
      .col-6
        .form-group.row
          = f.label Setting.live_certs.level, :class => "col-3 text-right col-form-label col-form-label"
          .col-9
            = f.select :level, options_for_cert_level, {:include_blank=>false}, {:class=>"form-control"}

    .form-row
      .col-12
        %h2.text-center.text-danger.bg-secondary
          注册专业选择
      - @prfs.each do |prf|
        .col-3
          .form-group.row.prf-ctn
            = f.label "", :class => "col-6 text-right col-form-label col-form-label" do
              %span{:class => @prf_hash[prf.id].nil? ? "prf-name" : "prf-name bg-success" }
                = prf.name
            .col-6
              = select_tag "prf_levels", options_for_prf_level(@prf_hash[prf.id]), :include_blank=>false, :class=>"form-control prf-level-select"
              = hidden_field_tag "prf[]", @prf_hash[prf.id].nil? ? prf.id : prf.id.to_s + "," + @prf_hash[prf.id], :class => "hidden-prf"
              = hidden_field_tag "prf-val", prf.id, :class => "prf-val"

    .form-row
      .col-6
        .form-group.row
          = f.label "注册证书正面", :class => "col-3 text-right col-form-label col-form-label"
          .col-3
            %label.newbtn
              = image_tag f.one_image("cert_front"), :class => "blah"
              = f.file_field :cert_front, :accept => "image/png, image/jpeg, image/gif", :class => "select-file", :onchange => "readURL(this);"
    
      .col-6
        .form-group.row
          = f.label "注册证书正面", :class => "col-3 text-right col-form-label col-form-label"
          .col-3
            %label.newbtn
              = image_tag f.one_image("cert_back"), :class => "blah"
              = f.file_field :cert_back, :accept => "image/png, image/jpeg, image/gif", :class => "select-file", :onchange => "readURL(this);"
    
      .col-6
        .form-group.row
          = f.label "初始证书正面", :class => "col-3 text-right col-form-label col-form-label"
          .col-3
            %label.newbtn
              = image_tag f.one_image("start_front"), :class => "blah"
              = f.file_field :start_front, :accept => "image/png, image/jpeg, image/gif", :class => "select-file", :onchange => "readURL(this);"
    
      .col-6
        .form-group.row
          = f.label "初始证书反面", :class => "col-3 text-right col-form-label col-form-label"
          .col-3
            %label.newbtn
              = image_tag f.one_image("start_back"), :class => "blah"
              = f.file_field :start_back, :accept => "image/png, image/jpeg, image/gif", :class => "select-file", :onchange => "readURL(this);"
    
      .col-6
        .form-group.row
          = f.label "安全生产考核证书正面", :class => "col-3 text-right col-form-label col-form-label"
          .col-3
            %label.newbtn
              = image_tag f.one_image("safe_front"), :class => "blah"
              = f.file_field :safe_front, :accept => "image/png, image/jpeg, image/gif", :class => "select-file", :onchange => "readURL(this);"
    
      .col-6
        .form-group.row
          = f.label "安全生产考核证书反面", :class => "col-3 text-right col-form-label col-form-label"
          .col-3
            %label.newbtn
              = image_tag f.one_image("safe_back"), :class => "blah"
              = f.file_field :safe_back, :accept => "image/png, image/jpeg, image/gif", :class => "select-file", :onchange => "readURL(this);"
    
    .form-group.row
      .col-3.offset-2
        = f.submit '保存', :class => "btn btn-success"
      .col-3.offset-1
        = link_to '返回', labour_live_live_certs_path, :class => "btn btn-danger"
